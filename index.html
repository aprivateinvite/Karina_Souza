<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pré-página + Chat simulado (Karina Souza)</title>
  <style>
    /* ---------- Estilos (inline para arquivo único) ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background:#f3f6f9;color:#111}
    a{color:inherit;text-decoration:none}

    .wrapper{max-width:1100px;margin:36px auto;padding:28px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(12,20,30,0.06);display:flex;gap:34px;align-items:center}
    .avatar-wrap{flex:0 0 300px;display:flex;align-items:center;justify-content:center}
    .avatar{width:300px;height:300px;border-radius:50%;overflow:hidden;border:8px solid #fff;box-shadow:0 12px 40px rgba(11,12,15,0.06)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .intro{flex:1}
    .intro h1{font-size:40px;margin-bottom:6px}
    .intro p{color:#555;margin-bottom:14px}
    .circles{display:flex;gap:16px;margin:16px 0}
    .circle{width:86px;height:86px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;color:#fff}
    .facebook{background:#1877F2}
    .instagram{background:linear-gradient(45deg,#F58529,#DD2A7B,#8134AF)}
    .x{background:#1DA1F2}
    .cta{display:inline-block;margin-top:6px;padding:12px 22px;border-radius:999px;background:#00BFFF;color:#fff;font-weight:700;cursor:pointer}
    .small{margin-top:18px;color:#888;font-size:13px}

    .chat-wrapper{display:none;max-width:420px;margin:28px auto;border-radius:14px;overflow:hidden;border:1px solid rgba(0,0,0,0.06);background:#eaf3ff}
    .chat-header{display:flex;align-items:center;gap:12px;padding:12px 14px;background:#f7fbff}
    .mini-avatar{width:46px;height:46px;border-radius:50%;overflow:hidden}
    .mini-avatar img{width:100%;height:100%;object-fit:cover}
    .messages{padding:14px;min-height:420px;max-height:640px;overflow:auto;background:linear-gradient(180deg,#f8fcff,#e9f6ff)}

    .msg{margin:10px 0;display:flex}
    .msg.bot{justify-content:flex-start}
    .msg.user{justify-content:flex-end}
    .bubble{max-width:74%;padding:10px 12px;border-radius:14px;line-height:1.36}
    .bubble.bot{background:#fff;border:1px solid rgba(0,0,0,0.04)}
    .bubble.user{background:#dcf8c6}
    .status-bubble{font-style:italic;color:#666;padding:8px 12px;border-radius:12px;background:transparent;margin-left:6px; font-size:13px}

    .controls{padding:12px;background:#fff;display:flex;gap:8px;align-items:center}
    .controls input[type=text]{flex:1;padding:10px;border-radius:8px;border:1px solid #ddd}
    .controls button{padding:8px 12px;border-radius:8px;border:none;background:#0b84ff;color:#fff;cursor:pointer}

    .inline-options{display:flex;gap:8px;margin-top:8px}
    .opt-btn{padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,0.08);cursor:pointer;background:#fff}

    .offer{padding:14px;margin:12px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.04);text-align:center}
    .offer a{display:inline-block;padding:10px 14px;border-radius:8px;background:#00BFFF;color:#fff;font-weight:700}

    img.chat-img{max-width:220px;border-radius:10px;display:block}

    @media (max-width:900px){.wrapper{flex-direction:column;align-items:center}.avatar-wrap{order:0}.intro{order:1}}
  </style>
</head>
<body>

  <!-- ---------- PRÉ-PÁGINA ---------- -->
  <div class="wrapper" id="prepage">
    <div class="avatar-wrap">
      <!-- AVATAR decorativo (não clicável) -->
      <div class="avatar"><img src="assets/images/perfil.jpg" alt="Karina"></div>
    </div>

    <div class="intro">
      <h1>Karina Souza</h1>
      <p>Sou estudante de psicologia — clique nas redes ou entre no chat para conversar.</p>

      <div class="circles">
        <a class="circle facebook" id="btnFacebook" href="#" target="_blank">Facebook</a>
        <a class="circle instagram" id="btnInstagram" href="#" target="_blank">Instagram</a>
        <a class="circle x" id="btnX" href="#" target="_blank">X</a>
      </div>

      <div>
        <button class="cta" id="ctaOpen">Entrar no chat</button>
      </div>

      <div class="small">Substitua arquivos em <code>assets/images</code> e <code>assets/audios</code>. Link final abre em nova aba.</div>
    </div>
  </div>

  <!-- ---------- CHAT SIMULADO ---------- -->
  <div class="chat-wrapper" id="chatWrap">
    <div class="chat-header">
      <div class="mini-avatar"><img src="assets/images/perfil.jpg" alt="Karina"></div>
      <div>
        <h3>Karina Souza</h3>
        <div style="font-size:12px;color:#666">Online</div>
      </div>
    </div>

    <div class="messages" id="messages"></div>

    <div class="controls" id="controls">
      <input type="text" id="userInput" placeholder="Digite seu nome aqui... (ex: Pedro)">
      <button id="sendBtn">Enviar</button>
    </div>
  </div>

  <script>
  /**************************************************************************
   *  CONFIGURAÇÃO (edite aqui: links, nomes de arquivos e ordem das mídias)
   *
   *  - socials: coloque seus URLs reais
   *  - assets.images / assets.audios: pastas relativas (padrão abaixo)
   *  - images[] e audios[]: nomes e ordem em que o bot usará as mídias
   *
   *  Estrutura esperada:
   *    assets/
   *      images/
   *        perfil.jpg
   *        foto01.jpg
   *        foto02.jpg
   *        foto03.jpg
   *        foto04.jpg
   *      audios/
   *        audio1.mp3
   *        audio2.mp3
   *        audio3.mp3
   *        audio4.mp3
   **************************************************************************/
  const cfg = {
    // troque pelos seus links
    socials: {
      facebook: 'https://facebook.com/SEU_USUARIO',
      instagram: 'https://instagram.com/SEU_USUARIO',
      x: 'https://x.com/SEU_USUARIO'
    },

    // caminhos das pastas (padrão)
    assets: {
      images: 'assets/images/',   // pasta onde estão perfil.jpg e fotos
      audios:  'assets/audios/'   // pasta onde estão os arquivos .mp3
    },

    // ordem das imagens (você pode renomear os arquivos e mudar a ordem aqui)
    images: [
      'foto01.jpg', // imagem 1 enviada quando o usuário permitir
      'foto02.jpg', // imagem 2
      'foto03.jpg', // imagem 3
      'foto04.jpg'  // imagem 4 (final)
    ],

    // ordem dos áudios (você pode renomear os arquivos e mudar a ordem aqui)
    audios: [
      'audio1.mp3', // áudio que pede o nome
      'audio2.mp3', // áudio de resposta / história
      'audio3.mp3',
      'audio4.mp3'
    ],

    botName: 'Karina Souza',

    // link de oferta (abre em nova aba)
    offerLink: 'https://exemplo.com/oferta',

    /* -------- parâmetros de tempo para simulação humana --------
       ajuste se quiser respostas mais rápidas ou mais lentas */
    timing: {
      typingPerCharRange: [50, 120],     // ms por caractere (digitação)
      readPerWordRange: [600, 1200],     // ms por palavra (leitura)
      pauseBetweenActionsRange: [1500, 3000], // pausa adicional entre ações
      recordTimeRange: [3000, 5500],     // tempo mostrando "gravando..."
      audioBuffer: 1000                   // buffer após fim do áudio
    }
  };

  // aplica links nos botões
  document.getElementById('btnFacebook').href = cfg.socials.facebook;
  document.getElementById('btnInstagram').href = cfg.socials.instagram;
  document.getElementById('btnX').href = cfg.socials.x;

  // ---------- utilitários de tempo ----------
  const randBetween = (min, max) => Math.round(min + Math.random() * (max - min));
  const delay = ms => new Promise(res => setTimeout(res, ms));

  function typingTimeFor(text){
    const chars = Math.max(1, text.length);
    const perChar = randBetween(...cfg.timing.typingPerCharRange);
    return Math.max(700, Math.round(chars * perChar));
  }
  function readingTimeFor(text){
    const words = Math.max(1, text.trim().split(/\s+/).length);
    const perWord = randBetween(...cfg.timing.readPerWordRange);
    return Math.max(1200, Math.round(words * perWord));
  }

  // ---------- helpers DOM ----------
  const messagesEl = document.getElementById('messages');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');

  function scrollBottom(){ messagesEl.scrollTop = messagesEl.scrollHeight; }

  function createBotBubble(text, isHTML=false){
    const wrap = document.createElement('div'); wrap.className = 'msg bot';
    const b = document.createElement('div'); b.className = 'bubble bot';
    if(isHTML) b.innerHTML = text; else b.innerText = text;
    wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom(); return wrap;
  }

  function createUserBubble(text){
    const wrap = document.createElement('div'); wrap.className = 'msg user';
    const b = document.createElement('div'); b.className = 'bubble user'; b.innerText = text;
    wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom(); return wrap;
  }

  function createImage(src){
    const wrap = document.createElement('div'); wrap.className = 'msg bot';
    const b = document.createElement('div'); b.className = 'bubble bot';
    const img = document.createElement('img'); img.className = 'chat-img'; img.src = src;
    b.appendChild(img); wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom(); return wrap;
  }

  function createAudioElement(src, autoplay=true){
    const wrap = document.createElement('div'); wrap.className = 'msg bot';
    const b = document.createElement('div'); b.className = 'bubble bot';
    const audio = document.createElement('audio'); audio.controls = true; audio.src = src;
    if(autoplay) audio.autoplay = true;
    b.appendChild(audio); wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom();
    return audio;
  }

  function createStatusBubble(text){
    // mostra indicador tipo "Karina está digitando..." ou "gravando..."
    const wrap = document.createElement('div'); wrap.className = 'msg bot';
    const b = document.createElement('div'); b.className = 'status-bubble'; b.innerText = text;
    wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom();
    return wrap;
  }

  // options (Sim/Não)
  function appendOptions(options, onSelect){
    const wrap = document.createElement('div'); wrap.className = 'msg bot';
    const b = document.createElement('div'); b.className = 'bubble bot';
    const row = document.createElement('div'); row.className = 'inline-options';
    options.forEach(opt=>{
      const btn = document.createElement('button'); btn.className = 'opt-btn'; btn.innerText = opt;
      btn.onclick = ()=>{ onSelect(opt); row.querySelectorAll('button').forEach(x=>x.disabled=true); };
      row.appendChild(btn);
    });
    b.appendChild(row); wrap.appendChild(b); messagesEl.appendChild(wrap); scrollBottom();
  }

  // preload assets (melhora experiência)
  function preload(){
    cfg.images.forEach(f => { const i = new Image(); i.src = cfg.assets.images + f; });
    cfg.audios.forEach(f => { const a = document.createElement('audio'); a.src = cfg.assets.audios + f; });
  }
  preload();

  // ---------- Fluxo da conversa (humanizado) ----------
  let userName = '';

  async function startConversation(){
    disableInput();

    // 1) primeira mensagem de texto (digitando -> enviar -> pausa leitura)
    const text1 = 'Olá, fiquei feliz que você aceitou meu convite!';
    let s = createStatusBubble(cfg.botName + ' está digitando...');
    await delay( typingTimeFor(text1) );
    s.remove();
    createBotBubble(text1);
    await delay( readingTimeFor(text1) + randBetween(...cfg.timing.pauseBetweenActionsRange) );

    // 2) gravação simulada antes do áudio
    const rec = createStatusBubble(cfg.botName + ' está gravando...');
    await delay( randBetween(...cfg.timing.recordTimeRange) );
    rec.remove();

    // 3) enviar audio que pede o nome
    const audioSrc = cfg.assets.audios + cfg.audios[0];
    const audioEl = createAudioElement(audioSrc, true);

    // quando áudio terminar -> digita pergunta (fallback incluso)
    audioEl.onended = async ()=>{
      await delay(cfg.timing.audioBuffer);
      const q = 'Meu nome é Karina, sou estudante de psicologia. Qual é o seu nome?';
      const st = createStatusBubble(cfg.botName + ' está digitando...');
      await delay( typingTimeFor(q) );
      st.remove();
      createBotBubble(q);
      enableInputForName();
    };

    // fallback: se autoplay for bloqueado e o audio ficar pausado, mostrar pergunta após X ms
    setTimeout(async ()=>{
      const auds = messagesEl.querySelectorAll('audio');
      if(!userName && auds.length && auds[0].paused){
        await delay(400);
        const q = 'Meu nome é Karina, sou estudante de psicologia. Qual é o seu nome?';
        const st = createStatusBubble(cfg.botName + ' está digitando...');
        await delay( typingTimeFor(q) );
        st.remove();
        createBotBubble(q);
        enableInputForName();
      }
    }, 5200);
  }

  function enableInputForName(){ userInput.disabled = false; sendBtn.disabled = false; userInput.focus(); }
  function disableInput(){ userInput.disabled = true; sendBtn.disabled = true; }

  // evento do botão enviar (nome)
  sendBtn.addEventListener('click', async ()=>{
    const v = userInput.value.trim(); if(!v) return;
    userInput.value = '';
    createUserBubble(v); disableInput(); userName = v;

    // resposta personalizada
    const reply = `Olá ${userName}, tudo bem? Como te disse, sou estudante de psicologia e estou vendendo este conteúdo para ajudar na mensalidade.`;
    let st = createStatusBubble(cfg.botName + ' está digitando...');
    await delay( typingTimeFor(reply) );
    st.remove();
    createBotBubble(reply);
    await delay( readingTimeFor(reply) + randBetween(...cfg.timing.pauseBetweenActionsRange) );

    // pergunta sobre envio de foto
    const q2 = 'Posso te enviar uma foto minha?';
    st = createStatusBubble(cfg.botName + ' está digitando...');
    await delay( typingTimeFor(q2) );
    st.remove();
    createBotBubble(q2);

    appendOptions(['Sim','Não'], async (choice)=>{
      createUserBubble(choice);
      await delay(randBetween(700,1300));

      if(choice === 'Sim'){
        // gravação curta -> envia foto01
        const r = createStatusBubble(cfg.botName + ' está gravando...');
        await delay(randBetween(1000,2400));
        r.remove();
        createImage(cfg.assets.images + cfg.images[0]);

        await delay(randBetween(1000,1800));

        // pergunta "Você me achou bonita?"
        const q3 = 'Você me achou bonita? Seja sincero!';
        const st3 = createStatusBubble(cfg.botName + ' está digitando...');
        await delay( typingTimeFor(q3) );
        st3.remove();
        createBotBubble(q3);

        appendOptions(['Sim','Não'], async (ans)=>{
          createUserBubble(ans);
          await delay(randBetween(900,1400));

          // gravação antes de audio2 (mais longa)
          const rec2 = createStatusBubble(cfg.botName + ' está gravando...');
          await delay(randBetween(...cfg.timing.recordTimeRange));
          rec2.remove();

          const audio2 = createAudioElement(cfg.assets.audios + cfg.audios[1], true);
          audio2.onended = async ()=>{
            await delay(cfg.timing.audioBuffer + randBetween(400,900));
            // foto02
            createImage(cfg.assets.images + cfg.images[1]);
            await delay(randBetween(1000,1800));
            // duas mensagens envolventes
            const m1 = 'Gosto de conversar com pessoas sinceras.';
            const m2 = 'Às vezes, é bom fugir um pouco da rotina, não acha?';
            let st4 = createStatusBubble(cfg.botName + ' está digitando...');
            await delay( typingTimeFor(m1) );
            st4.remove();
            createBotBubble(m1);
            await delay( readingTimeFor(m1) + randBetween(400,900) );
            let st5 = createStatusBubble(cfg.botName + ' está digitando...');
            await delay( typingTimeFor(m2) );
            st5.remove();
            createBotBubble(m2);
            await delay( readingTimeFor(m2) + randBetween(500,1100) );
            // foto03
            createImage(cfg.assets.images + cfg.images[2]);
            await delay(randBetween(1000,1800));
            // mensagem final + foto04 + oferta
            const finalMsg = 'Tenho um conteúdo especial que preparei com muito carinho.';
            let st6 = createStatusBubble(cfg.botName + ' está digitando...');
            await delay( typingTimeFor(finalMsg) );
            st6.remove();
            createBotBubble(finalMsg);
            await delay(randBetween(800,1400));
            createImage(cfg.assets.images + cfg.images[3]);
            await delay(randBetween(1000,1600));
            const offerWrap = document.createElement('div'); offerWrap.className='msg bot';
            const box = document.createElement('div'); box.className='offer';
            box.innerHTML = `<div><strong>Oferta especial</strong></div><div style="margin-top:8px"><a href="${cfg.offerLink}" target="_blank">VER OFERTA</a></div>`;
            offerWrap.appendChild(box); messagesEl.appendChild(offerWrap); scrollBottom();
          };
        });

      } else {
        // usuário disse não às fotos -> fluxo alternativo humanizado
        const alt = 'Tudo bem. Não vou insistir :) Posso te enviar mais informações em seguida.';
        const stAlt = createStatusBubble(cfg.botName + ' está digitando...');
        await delay( typingTimeFor(alt) );
        stAlt.remove();
        createBotBubble(alt);
        await delay(randBetween(1000,1800));

        // gravação e audio seguido por imagens e oferta
        const rec3 = createStatusBubble(cfg.botName + ' está gravando...');
        await delay(randBetween(...cfg.timing.recordTimeRange));
        rec3.remove();
        const audio2b = createAudioElement(cfg.assets.audios + cfg.audios[1], true);
        audio2b.onended = async ()=>{
          await delay(cfg.timing.audioBuffer + randBetween(400,900));
          createImage(cfg.assets.images + cfg.images[1]);
          await delay(randBetween(900,1400));
          const mA = 'Tenho um conteúdo especial que preparei com muito carinho.';
          const stA = createStatusBubble(cfg.botName + ' está digitando...');
          await delay( typingTimeFor(mA) );
          stA.remove();
          createBotBubble(mA);
          await delay(900);
          createImage(cfg.assets.images + cfg.images[2]);
          await delay(900);
          createImage(cfg.assets.images + cfg.images[3]);
          await delay(1100);
          const offerWrap = document.createElement('div'); offerWrap.className='msg bot';
          const box = document.createElement('div'); box.className='offer';
          box.innerHTML = `<div><strong>Oferta especial</strong></div><div style="margin-top:8px"><a href="${cfg.offerLink}" target="_blank">VER OFERTA</a></div>`;
          offerWrap.appendChild(box); messagesEl.appendChild(offerWrap); scrollBottom();
        };
      }
    });
  });

  // envio com Enter
  userInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') sendBtn.click(); });

  // cria bolha de usuário
  function createUserBubble(text){ const w = document.createElement('div'); w.className='msg user'; const b=document.createElement('div'); b.className='bubble user'; b.innerText=text; w.appendChild(b); messagesEl.appendChild(w); scrollBottom(); }

  // abre chat
  document.getElementById('ctaOpen').addEventListener('click', (e)=>{ e.preventDefault(); openChat(); });
  function openChat(){
    document.getElementById('prepage').style.display='none';
    document.getElementById('chatWrap').style.display='block';
    disableInput();
    startConversation();
  }

  // por padrão input desabilitado até o bot pedir o nome
  disableInput();

  </script>
</body>
</html>
